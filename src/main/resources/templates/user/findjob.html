<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head th:replace="~{fragment/common :: head}">

</head>
<script>

    var cat1_name = new Array('서울','부산','대구','인천','광주','대전','울산','강원','경기','경남','경북','전남','전북','제주','충남','충북');
    var cat2_name = new Array();
    cat2_name['서울'] = new Array('강남구','강동구','강북구','강서구','관악구','광진구','구로구','금천구','노원구','도봉구','동대문구','동작구','마포구','서대문구','서초구','성동구','성북구','송파구','양천구','영등포구','용산구','은평구','종로구','중구','중랑구');
    cat2_name['부산'] = new Array('강서구','금정구','남구','동구','동래구','부산진구','북구','사상구','사하구','서구','수영구','연제구','영도구','중구','해운대구','기장군');
    cat2_name['대구'] = new Array('남구','달서구','동구','북구','서구','수성구','중구','달성군');
    cat2_name['인천'] = new Array('계양구','남구','남동구','동구','부평구','서구','연수구','중구','강화군','옹진군');
    cat2_name['광주'] = new Array('광산구','남구','동구','북구','서구');
    cat2_name['대전'] = new Array('대덕구','동구','서구','유성구','중구');
    cat2_name['울산'] = new Array('남구','동구','북구','중구','울주군');
    cat2_name['강원'] = new Array('강릉시','동해시','삼척시','속초시','원주시','춘천시','태백시','고성군','양구군','양양군','영월군','인제군','정선군','철원군','평창군','홍천군','화천군','횡성군');
    cat2_name['경기'] = new Array('고양시 덕양구','고양시 일산구','과천시','광명시','광주시','구리시','군포시','김포시','남양주시','동두천시','부천시 소사구','부천시 오정구','부천시 원미구','성남시 분당구','성남시 수정구','성남시 중원구','수원시 권선구','수원시 장안구','수원시 팔달구','시흥시','안산시 단원구','안산시 상록구','안성시','안양시 동안구','안양시 만안구','오산시','용인시','의왕시','의정부시','이천시','파주시','평택시','하남시','화성시','가평군','양주군','양평군','여주군','연천군','포천군');
    cat2_name['경남'] = new Array('거제시','김해시','마산시','밀양시','사천시','양산시','진주시','진해시','창원시','통영시','거창군','고성군','남해군','산청군','의령군','창녕군','하동군','함안군','함양군','합천군');
    cat2_name['경북'] = new Array('경산시','경주시','구미시','김천시','문경시','상주시','안동시','영주시','영천시','포항시 남구','포항시 북구','고령군','군위군','봉화군','성주군','영덕군','영양군','예천군','울릉군','울진군','의성군','청도군','청송군','칠곡군');
    cat2_name['전남'] = new Array('광양시','나주시','목포시','순천시','여수시','강진군','고흥군','곡성군','구례군','담양군','무안군','보성군','신안군','영광군','영암군','완도군','장성군','장흥군','진도군','함평군','해남군','화순군');
    cat2_name['전북'] = new Array('군산시','김제시','남원시','익산시','전주시 덕진구','전주시 완산구','정읍시','고창군','무주군','부안군','순창군','완주군','임실군','장수군','진안군');
    cat2_name['제주'] = new Array('서귀포시','제주시','남제주군','북제주군');
    cat2_name['충남'] = new Array('공주시','논산시','보령시','서산시','아산시','천안시','금산군','당진군','부여군','서천군','연기군','예산군','청양군','태안군','홍성군');
    cat2_name['충북'] = new Array('제천시','청주시 상당구','청주시 흥덕구','충주시','괴산군','단양군','보은군','영동군','옥천군','음성군','진천군','청원군');

    function cat1_change(key,sel){
        if(key === '') return;
        var name = cat2_name[key];


        for(i=sel.length-1; i>=0; i--)
            sel.options[i] = null;
        sel.options[0] = new Option('-선택-','', '', 'true');
        for(i=0; i<name.length; i++){
            sel.options[i+1] = new Option(name[i],name[i]);
        }
    }


</script>
<style>
@import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@100..900&display=swap');
body{
font-family: 'Noto Sans KR', sans-serif;
}
.search{
    margin-top: 10px;
    margin-right: 30px;

    padding: 20px;
    height: 200px;
}
.select {
    padding: 15px 10px;
}
.select input[type=radio]{
    display: none;
}
.select input[type=radio]+label{
    display: inline-block;
    cursor: pointer;
    height: 24px;
    width: 90px;
    border: 1px solid #333;
    line-height: 24px;
    text-align: center;
    font-weight:bold;
    font-size:13px;
}
.select input[type=radio]+label{
    background-color: #fff;
    color: #333;
}
.select input[type=radio]:checked+label{
    background-color: #333;
    color: #fff;
}
</style>
<script>
    $(document).ready(function (){
    $("#find").on("click",function (event){
        event.preventDefault();
        const area1 = $("#area1").val();
        const area2 = $("#area2").val();
        const job = $('input[name=job]:checked').val();
        const time = $('input[name=time]:checked').val();
        $('#input-area2').val(area2);
        console.log(area1);
        console.log(area2);
        console.log(job);
        console.log(time);
        $("#search-form").submit();




    });




    });

</script>
<body>

<header class="p-3 mb-3 border-bottom" th:replace="~{fragment/common :: menu(home)}">
</header>
<main class="d-flex">
<nav  th:replace="~{fragment/common :: user-nav(menu)}">
</nav>

    <div class="container">
        <div class="search row" style="height: 400px;">
            <form id="search-form" method="get" action="/user/findjob">
            <div class="search-loc d-flex" style="border-bottom: 1px solid #eee; padding: 20px; ">
                <div > <h3><i class="fa-solid fa-location-dot" style="color:green;margin-bottom: 20px;"></i>지역별</h3></div>
                <div style="margin-left:30px;margin-right: 10px;">

                    <select id="area1" name="area1" onChange="cat1_change(this.value,document.getElementById('area2'))" class="form-select" style="width: 150px;">
                        <option value="''" selected>-선택-</option>
                        <option value='서울' >서울</option>
                        <option value='부산' >부산</option>
                        <option value='대구'>대구</option>
                        <option value='인천'>인천</option>
                        <option value='광주'>광주</option>
                        <option value='대전'>대전</option>
                        <option value='울산'>울산</option>
                        <option value='강원'>강원</option>
                        <option value='경기'>경기</option>
                        <option value='경남'>경남</option>
                        <option value='경북'>경북</option>
                        <option value='전남'>전남</option>
                        <option value='전북'>전북</option>
                        <option value='제주'>제주</option>
                        <option value='충남'>충남</option>
                        <option value='충북'>충북</option>
                    </select>
                </div>
                <div>
                  <select id="area2" class="form-select" style="width: 150px;">

                        <option value="''" selected>-선택-</option>


                    </select>
                </div>

            </div> <!-- end of search-loc -->
            <div class="d-flex"  style="border-bottom: 1px solid #eee; padding: 20px; ">
                <div style="margin-right: 30px; width: 200px;"><h3><i class="fa-solid fa-heart" style="color:deeppink;"></i>업종별</h3></div>
                <div class="select">
                    <input type="radio" id="select" value="1" name="job"><label for="select">주방</label>
                    <input type="radio" id="select2" value="2" name="job"><label for="select2">서빙</label>
                    <input type="radio" id="select3" value="3" name="job"><label for="select3">카운터</label>
                    <input type="radio" id="select4" value="4" name="job"><label for="select4">단순노무</label>
                    <input type="radio" id="select5" value="5" name="job"><label for="select5">서비스업</label>
                    <input type="radio" id="select6" value="6" name="job"><label for="select6">건설·공사</label>
                    <input type="radio" id="select7" value="7" name="job"><label for="select7">물류</label>
                    <input type="radio" id="select8" value="8" name="job"><label for="select8">행사·홍보</label>
                    <input type="radio" id="select9" value="9" name="job"><label for="select9">조립·생산</label>
                    <input type="radio" id="select10" value="10" name="job"><label for="select10">배송·운전</label>
                    <input type="radio" id="select11" value="11" name="job"><label for="select11">사무·관리</label>
                    <input type="radio" id="select12" value="12" name="job"><label for="select12">프로젝트</label>
                    <input type="radio" id="select13" value="13" name="job"><label for="select13">프리랜서</label>
                    <input type="radio" id="select14" value="14" name="job"><label for="select14">기타</label>
                </div>

            </div>
            <div class="d-flex"  style="padding: 20px; ">
                <div style="margin-right: 30px; width: 200px;"><h3><i class="fa-regular fa-clock"></i>시간대별</h3></div>
                <div class="form-check" style="margin-right: 15px;">
                    <input class="form-check-input" type="radio" name="time" value="weekday" id="weekday"><label class="form-check-label" for="weekday">평일</label>

                </div>
                <div class="form-check" style="margin-right: 15px;">
                    <input class="form-check-input" type="radio" name="time" value="weekend" id="weekend"><label class="form-check-label" for="weekend">주말</label>
                </div>
                <div class="form-check" style="margin-right: 15px;">
                    <input class="form-check-input" type="radio" name="time" checked value="all" id="all"><label class="form-check-label" for="all">상관없음</label>

                </div>
                </div>
            <div class="d-flex justify-content-end"  style="border-bottom: 1px solid #eee;">
                    <button class="btn btn-primary" style="margin-right: 10px;" onclick="searchfilter()">필터적용</button>
<!--                <button class="btn btn-primary" type="button" id="find">찾기</button>-->
                <input type="hidden" name="area2" id="input-area2">
                <input class="btn btn-primary" type="submit" value="찾기" id="find">
            </div>
            </form>
        </div> <!-- end of search -->
        <div class="row d-flex" id="search-all">
            <th:block th:each="item : ${list}">
            <div class="card" style="width: 20rem;">
                <img th:src="@{'/findjob/img/'+${item.storeimg}}" style="margin-top: 5px;" class="card-img-top" alt="...">
                <div class="card-body">
                    <h5 class="card-title" th:text="${item.title}"></h5>
                    <p class="card-text" th:text="${item.storename}"></p>
                    <p class="card-text" th:inline="text">
                        <i class="fa-solid fa-location-dot" style="color:green;"></i>
                    [[${item.location}]]</p>
                    <p class="card-text" th:text="(${item.time eq 'weekday'} ? '평일 - ' : ' 주말 - ') + ${item.start_time} + '~' + ${item.end_time}">

                    </p>
                    <p class="card-text"></p>
                    <a th:href="@{'/showEmploy/'+${item.id}}" class="btn btn-primary">상세보기</a>
<!--                    <th:block th:if="${#lists.contains(item.getResumes(), ${#authentication.getName()})}">-->
<!--                        <div>-->
<!--                            <button type="button" class="btn btn-danger"><i class="fa-solid fa-check"></i>지원완료!</button>-->
<!--                        </div>-->
<!--                    </th:block>-->
                </div>
            </div>
            </th:block>

        </div>
        <div class="row">
            <nav aria-label="Page navigation example">
                <ul class="pagination justify-content-center">
                    <li class="page-item" th:classappend="${1 == (list.pageable.pageNumber +1)}? 'disabled'">
                        <a class="page-link" th:href="@{/user/findjob(page=${(list.pageable.pageNumber)-1},area1=${param.area1})}" >이전</a>
                    </li>
                    <!--                컨트롤러에서 넘어온 startPage에서 endPage까지 반복을 통해 li태그 생성-->
                    <!--                boards안에 있는 pageable 객체의 pageNumber는 0부터 시작, 해당 pageNumber이 i면(현재페이지) disabled 처리 -->
                    <li class="page-item"
                        th:classappend="${i == list.pageable.pageNumber +1}? 'disabled'"
                        th:each="i:${#numbers.sequence(startPage,endPage)}"
                        th:if="${i>= (list.pageable.pageNumber)-5 and i<= list.pageable.pageNumber+5}">
                        <a class="page-link" href="#" th:href="@{/user/findjob(page=(${i}-1),area1=${param.area1})}" th:text="${i}">1</a>
                    </li>

                    <li class="page-item" th:classappend="${list.totalPages == list.pageable.pageNumber +1}? 'disabled'">
                        <!--                                                    ${boards.pageable.pageNumber+1} : 현재페이지 +1    -->
                        <a class="page-link" href="#" th:href="@{/user/findjob(page=${list.pageable.pageNumber+1},area1=${param.area1})}" >다음</a>
                    </li>
                </ul>
            </nav>

        </div>
    </div>

</main>
</body>

</html>